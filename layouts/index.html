{{ define "head" }}
  {{ $styles := resources.Get "css/index.css" | postCSS | minify | fingerprint }}
  <link rel="stylesheet" href="{{ $styles.RelPermalink }}" integrity="{{ $styles.Data.Integrity }}"/>
{{ end }}

{{ define "main" }}
<main id="main" class="index">
  {{ $paginator := .Paginate (where .Site.RegularPages "Type" "==" "posts") }}

  {{ range $paginator.Pages }}
  <div class="post">
    <h2>
      <a class="read" href="{{ .Permalink }}">{{ .Title }}</a>
      <div>
        {{ if gt .ReadingTime 1 }}
	        {{ .Scratch.Set "timeUnit" "mins" }}
        {{ else }}
	        {{ .Scratch.Set "timeUnit" "min" }}
        {{ end }}
        <span>~{{.ReadingTime}} {{ .Scratch.Get "timeUnit" }}</span>
        <time>{{ .PublishDate.Format "2006/01/02 15:04" }}</time>
      </div>
    </h2>

    {{ if ne .Params.tags nil }}
    <div>
      {{ range .Params.tags }}
      <a class="link red" href='{{ "tags" | absURL }}/{{ . | urlize }}'>#{{ . }}</a>
      {{ end }}
    </div>
    {{ end }}

    <div class="content">
      {{ .Summary }}
    </div>
  </div>
  {{ end }}

  {{ if $paginator.HasPrev | or $paginator.HasNext }}
  <div class="paginator">
    {{ if $paginator.HasPrev }}
    <a class="link" href="{{ $paginator.Prev.URL }}">← prev</a>
    {{ else }}
    <a></a>
    {{ end }}
    {{ if $paginator.HasNext }}
    <a class="link" href="{{ $paginator.Next.URL }}">next →</a>
    {{ else }}
    <a></a>
    {{ end }}
  </div>
  {{ end }}
</main>
{{ end }}
